pragma solidity ^0.4.25;
contract dgame {
	uint registerDuration;
	uint endRegisterTime;
	address[] players;
	string debug;
	constructor() public {
	registerDuration = 180;
	}
	function () payable public {
	if(players.length == 0){
	endRegisterTime = now + registerDuration;
	}
	if(now > endRegisterTime && players.length > 0){
	uint winner = uint(block.blockhash(block.number - 1)) % players.length;
	if(! players[winner].send(this.balance)){
	throw;}
	delete players;
	}
	else{
	players.push(msg.sender);
	}
	}
	
}